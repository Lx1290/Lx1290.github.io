### 服务管理

#### 新增字段

```

ALTER TABLE "ai_data_point".API_USER RENAME COLUMN REMARK TO CALLER_NAME;
ALTER TABLE "ai_data_point".API_USER ADD SERVICE_DESC varchar(1000) NULL;
ALTER TABLE "ai_data_point".API_USER ADD CREATE_TIME timestamp NULL;
ALTER TABLE "ai_data_point".API_USER ADD ENABLE_STATUS tinyint NULL;
ALTER TABLE "ai_data_point".API_USER ADD CREATE_BY varchar(100) NULL;
ALTER TABLE "ai_data_point".API_USER ADD MODIFIED_BY varchar(100) NULL;
ALTER TABLE "ai_data_point".API_USER ADD API_TYPE tinyint NULL;
ALTER TABLE "ai_data_point".API_USER MODIFY API_TYPE TINYINT DEFAULT 1 NULL;
ALTER TABLE "ai_data_point".API_USER ADD DAILY_CALL_NUM int NULL;


```
 #### 新增统一接口日志表
 
 ```
CREATE TABLE API_LOG (
	ID BIGINT NOT NULL AUTO_INCREMENT,
	ACCESS_KEY VARCHAR(100) NULL,
	START_TIME TIMESTAMP NULL,
	END_TIME TIMESTAMP NULL,
	CALLER_STATUS VARCHAR(100) NULL,
	CALLER_PARAMS CLOB NULL,
	ERROR_MSG CLOB NULL,
	CONSTRAINT API_LOG_PK PRIMARY KEY (ID)
);
COMMENT ON TABLE "ai_data_point".API_LOG IS 'api调用记录';
COMMENT ON COLUMN "ai_data_point".API_LOG.ACCESS_KEY IS '秘钥';
COMMENT ON COLUMN "ai_data_point".API_LOG.START_TIME IS '调用开始时间';
COMMENT ON COLUMN "ai_data_point".API_LOG.END_TIME IS '调用结束时间';
COMMENT ON COLUMN "ai_data_point".API_LOG.CALLER_STATUS IS '调用状态';
COMMENT ON COLUMN "ai_data_point".API_LOG.CALLER_PARAMS IS '调用参数';

 ```

 #### 新增熔断状态表

 ```
CREATE TABLE API_CIRCUIT_BREAKER (
	ID INT NOT NULL AUTO_INCREMENT,
	ACCESS_KEY VARCHAR(100) NULL,
	FAILURE_COUNT INT NULL,
	DAILY_CALL_LIMIT INT NULL,
	IS_OPEN INT NULL,
	STAT_DATE DATE NULL,
	CONSTRAINT API_CIRCUIT_BREAKER_PK PRIMARY KEY (ID)
);
 ```

 ### 任务管理

 #### 任务表新增字段

 ```
	ALTER TABLE DATA_LOADER.DL_ETL_TASK_INFO ADD DATA_SOURCE_CODE varchar(10) NULL;
	ALTER TABLE DATA_LOADER.DL_ETL_TASK_INFO ADD ITEM_TYPE varchar(100) NULL;
 ```

 #### 需在数据表管理中增加如下表

 - TI_INDEX_INFO
 - TI_CALCULATE_CONF(拿到tid，修改配置文件)